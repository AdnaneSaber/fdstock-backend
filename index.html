<!DOCTYPE html>
<html>
<head>
  <title>Private Messaging Test</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.js"></script>
</head>
<body>
  <h1>Private Messaging Test</h1>
  <div id="message-container"></div>
  <input type="text" id="message-input" placeholder="Type your message...">
  <button id="send-button">Send</button>

  <script>
    // Connect to the Socket.IO server
    const socket = io('http://localhost:8000/');

    // Get the message container and message input elements
    const messageContainer = document.getElementById('message-container');
    const messageInput = document.getElementById('message-input');

    // Get the send button and add a click event listener
    const sendButton = document.getElementById('send-button');
    sendButton.addEventListener('click', () => {
      sendMessage();
    });

    // Send a private message to the server
    function sendMessage() {
      const message = messageInput.value;
      const recipient = '06678ad7-c61d-408a-a5f2-8bbfb5ad8a81'; // Replace with the actual recipient user ID
      const token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwdWJsaWNfaWQiOiJkY2RlOWUzYi0zMWE2LTQ3YjctYjdjYS0zOWU1ZWQ4MTNmNWIiLCJleHAiOjE3MTA1ODcwNzR9.6jO9P4-B88XovQ8KC2aI8hxxhOq2iz4_b4LmchAzhvY"
      if (message.trim() !== '') {
        socket.emit('private_message', { message, recipient, token });
        messageInput.value = '';
      }
    }

    // Handle private messages received from the server
    socket.on('private_message', data => {
      const { message, sender } = data;
      const messageElement = document.createElement('div');
      messageElement.textContent = `${sender}: ${message}`;
      messageContainer.appendChild(messageElement);
    });
  </script>
</body>
</html>
